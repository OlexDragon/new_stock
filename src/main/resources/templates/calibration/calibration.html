<!DOCTYPE html>
<html 	xmlns="http://www.w3.org/1999/xhtml"
		xmlns:th="https://www.thymeleaf.org"
      	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      	lang="en">
<head>
	<meta charset="utf-8">
    <title th:inline="text">[[${info==null ? 'IRT' : info.serialNumber + ' -'}]] Calibration.</title>
    <link rel="shortcut icon" href="http://www.irttechnologies.com/favicon.ico">
<th:block th:replace="components :: bootstrapLink">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
</th:block>
    <link rel="stylesheet" href="../../static/css/components.css" th:href="@{/css/components.css}">
    <link rel="stylesheet" href="../../static/css/calibration.css" th:href="@{/css/calibration.css}">
</head>
<body th:with="partNumber = ${info==null ? '' : info.partNumber}">
	<input id="devid" type="hidden" th:value="${devid}">
	<input id="typeVersion" type="hidden" th:if="${info}!=null" th:value="${info.getTypeVersion()}">

	<nav class="navbar fixed-top navbar-light bg-light row">
 
<!-- Navigation Dropdown Menu from components.html -->
		<div class="dropdown col-auto" th:replace="components::dropdownMenu">
  			<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false"></button>
  			<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    			<a class="dropdown-item" href="components.html" th:href="@{/}">Components</a>
    			<a class="dropdown-item" href="bom.html" th:href="@{/bom}">BOMs</a>
  			</div>
		</div>
		<div class="nav-item col-auto"><h4 id="serialNumber" th:text="${info==null ? '' : info.serialNumber }" th:title="${partNumber}">Serial Number</h4></div>
		<div class="nav-item col-auto"><h4>:</h4></div>
		<div id="unit_description" class="nav-item col"><h4 th:text="${info==null ? '' : info.name}">Unit Name</h4></div>

		<div class="nav-item input-group col" title="Serial Port Servers">
   			<button id="btn-http-comport" class="input-group-text" >SP Server: </button>
			<select id="spServers" class="form-select" aria-label="Serial Port Servers" title="Serial Port">
				<option selected="selected" disabled="disabled" hidden="hidden" title="Serial Port Server" value="">Select a Serial Port Server</option>
				<option
					 th:each="serialPortServer : ${ serialPortServers.entrySet() }"
					 th:value="${ serialPortServer.key}"
					 th:text="${ 'http://' + serialPortServer.key + ':' + serialPortServer.value  }">Serial Port Server Name</option>
			</select>
		</div>

<!-- BTRs Dropdown menu -->
		<div class="nav-item dropstart col-auto">
  			<button class="btn dropdown-toggle" type="button" id="dropdownBtrButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">BTR</button>
  			<div class="dropdown-menu" aria-labelledby="dropdownBtrButton">
<!-- BTR Measurement -->
    			<a id="btrMeasurement" 
    				class="dropdown-item calibrate" 
    				th:href="@{${info==null} ? (${sn} == null ? '#' : '/calibration/btr?sn=' + ${sn}) : '/calibration/btr?sn=' + ${info.serialNumber}}">Measurement</a>
<!-- BTR PowerDetector -->
    			<a id="btrPowerDetector" 
    				class="dropdown-item calibrate"
    				th:classappend="${info==null} ? 'disabled'"
    				th:href="@{${info==null} ? (${sn} == null ? '#' : '/calibration/btr/pd?sn=' + ${sn}) : '/calibration/btr/pd?sn=' + ${info.serialNumber}}">Power Detector</a>
  			</div>
		</div>
<!-- Unit Dropdown menu -->
		<div class="nav-item dropstart col-auto">
  			<button class="btn dropdown-toggle" type="button" id="dropdownUnitButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Unit</button>
  			<div class="dropdown-menu" aria-labelledby="dropdownUnitButton">
    			<a class="dropdown-item" th:classappend="${info==null ? 'disabled list-group-item-light' : ''}" th:href="@{${info==null} ? '#' : 'http://' + ${info.serialNumber}}" target="_blank">Web</a>
    			<a id="unitLogin" class="dropdown-item unitLogin" th:classappend="${info==null ? 'disabled list-group-item-light' : ''}" th:href="@{${info==null} ? '#' : '/calibration/rest/login?sn=' + ${info.serialNumber}}">Login</a>
    			<a id="currents" class="dropdown-item" href="#">Currents</a>
    			<a 	id="initialize"
    				class="dropdown-item calibrate"
    				th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
    				th:href="@{${info==null} ? '#' : '/calibration/initialize?sn=' + ${info.serialNumber}}" href="#">Initialize</a>
    			<div><hr class="dropdown-divider"></div>
<!-- Profile  -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuModuleProfile"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu" aria-labelledby="menuModuleProfile">
    						<a class="dropdown-item disabled">Modules:</a>
<!--  Profile  Modules -->
<th:block th:remove="all">
<th:block th:fragment="menuModuleProfile">
    						<a	th:each="info : ${modules}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							class="dropdown-item"
    							onclick="getProfile(event, this);"
   								th:href="@{${info==null or info.moduleId==null} ? '#' : '/calibration/rest/profile?sn=' + ${serialNumber} + '&moduleId=' + ${info.moduleId}}" 
   								target="_blank">Module Profile</a>
</th:block>
</th:block>
    					</div>
					</div>
<!-- System Profile  -->
   					<a 	id="profile"
   						class="dropdown-item" 
   						th:classappend="${info==null ? 'disabled list-group-item-light' : ''}" 
   						th:href="@{${info==null} ? '#' : '/calibration/rest/profile?sn=' + ${info.serialNumber}}" 
   						target="_blank">Profile</a>
				</div>
<!-- Profile Path -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuModuleProfilePath"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu" aria-labelledby="menuModuleProfilePath">
    						<a class="dropdown-item disabled">Modules:</a>
<!--  Profile Path Modules -->
<th:block th:remove="all">
<th:block th:fragment="menuModuleProfilePath">
    						<a	th:each="info : ${modules}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							class="dropdown-item"
    							onclick="getPath(event, this);"
   								th:href="@{${info==null} ? '#' : '/calibration/rest/profile/path?sn=' + ${info.serialNumber}}"
   								target="_blank">Module Profile Path</a>
</th:block>
</th:block>
    					</div>
					</div>
<!-- System Profile Path -->
   					<a class="dropdown-item profilePath" th:href="@{'/calibration/rest/profile/path?sn=' + ${info==null ? serialNumber : info.serialNumber}}" target="_blank">Profile Path</a>
 				</div>
<!-- Profile Dir -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuModuleProfilePath"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu" aria-labelledby="menuModuleProfilePath">
    						<a class="dropdown-item disabled">Modules:</a>
<!--  Profile Dir Modules -->
<th:block th:remove="all">
<th:block th:fragment="menuModuleProfilePath">
    						<a	th:each="info : ${modules}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							class="dropdown-item"
    							onclick="getPath(event, this);"
   								th:href="@{${info==null} ? '#' : '/calibration/rest/profile/dir?sn=' + ${info.serialNumber}}"
   								target="_blank">Module Profile Path</a>
</th:block>
</th:block>
    					</div>
					</div>
<!-- System Profile Dir -->
   					<a class="dropdown-item profileDir" th:href="@{'/calibration/rest/profile/dir?sn=' + ${info==null ? serialNumber : info.serialNumber}}" target="_blank">Profile Dir</a>
 				</div>
<!-- Upload Profile-->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuUploadModule"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu" aria-labelledby="menuUploadModule">

    						<a class="dropdown-item disabled">Modules:</a>
<!--  Upload Modules Profile -->
<th:block th:remove="all">
<th:block th:fragment="menuUploadModule">
    						<a	th:each="info : ${modules}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							class="dropdown-item"
    							onclick=" upload(event, this);"
    							th:href="@{${info==null} ? '#' : '/calibration/rest/profile/upload?sn=' + ${serialNumber} + '&moduleSn=' + ${info.serialNumber}}">Module Serial Number</a>
</th:block>
</th:block>
    					</div>
					</div>
<!-- Upload System Profile-->
					<a	class="dropdown-item upload"
						th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
						th:href="@{${info==null} ? '#' : '/calibration/rest/profile/upload?sn=' + ${info.serialNumber}}">Profile Upload</a>
 				</div>
<!-- Download Package -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuModulePackage"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu " aria-labelledby="menuModulePackage">

    						<a class="dropdown-item disabled">Modules:</a>
<!-- Download Modules Package -->
<th:block th:remove="all">
<th:block th:fragment="menuModulePackage">
    						<a	th:each="info : ${modules}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							class="dropdown-item"
    							th:href="@{${info==null} ? '#' : '/calibration/rest/profile/package?sn=' + ${serialNumber} + '&moduleSn=' + ${info.serialNumber}}">Module Serial Number</a>
</th:block>
</th:block>
    					</div>
					</div>
<!-- Download System Package-->
					<a	class="dropdown-item"
						th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
						th:href="@{${info==null} ? '#' : '/calibration/rest/profile/package?sn=' + ${info.serialNumber}}">Profile Package</a>
 				</div>
<!-- Package in Package -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuModulePackageInPackage"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu " aria-labelledby="menuModulePackageInPackage">

    						<a class="dropdown-item disabled">Modules:</a>
<!-- Select Modules Package -->
<th:block th:remove="all">
<th:block th:fragment="menuModulePackageInPackage" th:each="info : ${modules}">
							<label for="attachProfile"
								class="dropdown-item soft-select"
								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
								th:text="${info.serialNumber}">Profile in Package</label>
							<input id="attachProfile" type="file" data-th-data-sn="${serialNumber}" data-th-data-module-sn="${info.serialNumber}" accept=".bin, .pkg" onchange="packageInPackage(this);" hidden="hidden">
</th:block>
</th:block>
    					</div>
					</div>
<!-- Select System Package-->
					<label for="attachFiles"
						class="dropdown-item soft-select"
						th:classappend="${info==null ? 'disabled list-group-item-light' : ''}">Package in Package</label>
					<input id="attachFiles" type="file" data-th-data-sn="${serialNumber}" accept=".pkg" onchange="packageInPackage(this);" hidden="hidden">
 				</div>
    			<div><hr class="dropdown-divider"></div>
<!-- Soft Path -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuModuleSoftPath"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu" aria-labelledby="menuModuleSoftPath">
    						<a class="dropdown-item disabled">Modules:</a>
<!--  Soft Path Modules -->
<th:block th:remove="all">
<th:block th:fragment="menuModuleSoftPath">
    						<a	th:each="info : ${modules}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							class="dropdown-item"
    							onclick="getPath(event, this);"
   								th:href="@{${info==null} ? '#' : '/calibration/rest/soft/path?sn=' + ${info.serialNumber}}"
   								target="_blank">Module Soft Path</a>
</th:block>
</th:block>
    					</div>
					</div>
<!-- System Soft Path -->
   					<a class="dropdown-item profilePath" th:href="@{'/calibration/rest/soft/path?sn=' + ${info==null ? serialNumber : info.serialNumber}}" target="_blank">Soft Path</a>
 				</div>
<!-- Upload Soft-->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuUploadModuleSoft"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu" aria-labelledby="menuUploadModuleSoft">

    						<a class="dropdown-item disabled">Modules:</a>
<!--  Upload Modules Soft -->
<th:block th:remove="all">
<th:block th:fragment="menuUploadModuleSoft">
    						<a	th:each="info : ${modules}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							class="dropdown-item"
    							onclick=" upload(event, this);"
    							th:href="@{${info==null} ? '#' : '/calibration/rest/soft/upload?sn=' + ${serialNumber} + '&moduleSn=' + ${info.serialNumber}}">Module Serial Number</a>
</th:block>
</th:block>
    					</div>
					</div>
<!-- Upload System Soft-->
					<a	class="dropdown-item upload"
						th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
						th:href="@{${info==null} ? '#' : '/calibration/rest/soft/upload?sn=' + ${info.serialNumber}}">Soft Upload</a>
 				</div>
<!-- Download Soft Package -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuDownloadModuleSoft"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu " aria-labelledby="menuDownloadModuleSoft">

    						<a class="dropdown-item disabled">Modules:</a>
<!-- Download Soft Modules Package -->
<th:block th:remove="all">
<th:block th:fragment="menuDownloadModuleSoft">
    						<a	th:each="info : ${modules}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							class="dropdown-item"
    							th:href="@{${info==null} ? '#' : '/calibration/rest/soft/package?sn=' + ${serialNumber} + '&moduleSn=' + ${info.serialNumber}}">Module Serial Number</a>
</th:block>
</th:block>
    					</div>
					</div>
<!-- Download Soft System Package-->
					<a	class="dropdown-item"
						th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
						th:href="@{${info==null} ? '#' : '/calibration/rest/soft/package?sn=' + ${info.serialNumber}}">Soft Package</a>
 				</div>
<!-- Select Soft -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuSelectModuleSoft"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu " aria-labelledby="menuSelectModuleSoft">
    						<a class="dropdown-item disabled">Modules:</a>
<!-- Select Soft Modules -->
<th:block th:remove="all">
<th:block th:fragment="menuSelectModuleSoft" th:each="info : ${modules}">
							<label for="attachFiles"
								class="dropdown-item soft-select"
								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
								th:text="${info.serialNumber}">Soft Select</label>
							<input id="attachFiles" type="file" data-th-data-sn="${serialNumber}" data-th-data-module-sn="${info.serialNumber}" accept=".bin, .pkg" onchange="softSelected(this);" hidden="hidden">
</th:block>
</th:block>
    					</div>
					</div>
<!-- Select Soft System-->
					<label for="attachFiles"
						class="dropdown-item soft-select"
						th:classappend="${info==null ? 'disabled list-group-item-light' : ''}">Soft Select</label>
					<input id="attachFiles" type="file" data-th-data-sn="${serialNumber}" accept=".bin, .pkg" onchange="softSelected(this);" hidden="hidden">
 				</div>
    			<div><hr class="dropdown-divider"></div>
<!-- Power Chart -->
    			<a	id="menuPowerChart"
    				class="dropdown-item calibrate"
    				th:href="@{${ip==null} ? '#' : '/calibration/power_chart?sn=' + ${ip}}" 
    				target="_blank">Power Chart</a>
    			<div><hr class="dropdown-divider"></div>
<!-- Network Scan -->
    			<a id="scan" class="dropdown-item" href="#">Network Scan</a>
  			</div>
		</div>

<!-- Calibration select Dropdown menu -->
		<div class="nav-item dropstart col-auto">
  			<button id="dropdownCalibrateButton" class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Calibrate</button>
  			<div id="calMenu" class="dropdown-menu" aria-labelledby="dropdownCalibrateButton">
<!-- Input Power -->
    			<a	id="menuInputPower"
    				class="dropdown-item calibrate disabled list-group-item-light"
    				th:href="@{${(info==null or info.deviceId==null)} ? '/calibration/converter/input-power' : '/calibration/input-power?sn=' + ${info.serialNumber} + '&pn=' + ${partNumber} + '&deviceId=' + ${#strings.substring(info.deviceId, 1, info.deviceId.length()-1)}}">Input Power</a>
<!-- Output Power -->
				<div class="btn-group" style="width:100%;">
					<div class="btn-group dropstart" role="group">
 						<button id="menuOutputPowerAuto"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu" aria-labelledby="menuOutputPowerAuto">

    						<a class="dropdown-item disabled">Auto:</a>

    						<a id="menuOPAutoByInput"
    							class="dropdown-item calibrate disabled"
    							th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
    							th:href="@{${info==null} ? '#' : '/calibration/op/by_input?sn=' + ${info.serialNumber} + '&pn=' + ${partNumber}}">by Input - SP Server needed</a>

    						<a id="nemuOPAutoByGain"
    							class="dropdown-item calibrate disabled"
    							th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
    							th:href="@{${(info==null or info.deviceId==null)} ? '/calibration/converter/output-power' : '/calibration/op/by_gain?sn=' + ${info.serialNumber} + '&pn=' + ${partNumber}}">by Gain - SP Server needed</a>
    					</div>
					</div>
    				<a	id="menuOutputPower"
    					class="dropdown-item calibrate"
    					th:href="@{${(info==null or info.deviceId==null)} ? '/calibration/converter/output-power' : '/calibration/op?sn=' + ${info.serialNumber} + '&pn=' + ${partNumber}}">Output Power</a>
 				</div>
<!-- Power Offset -->
    			<a	id="menuPowerOffset"
    				class="dropdown-item calibrate"
    				th:classappend="${(info==null or info.deviceId==null) ? 'disabled list-group-item-light' : ''}"
    				th:href="@{${(info==null or info.deviceId==null)} ? '#' : '/calibration/power_offset?sn=' + ${info.serialNumber} + '&pn=' + ${partNumber} + '&deviceId=' + ${#strings.substring(info.deviceId, 1, info.deviceId.length()-1)}}">Power Offset</a>
<!-- Gain -->
    			<a id="menuGain" class="dropdown-item calibrate disabled" th:classappend="${info==null ? 'disabled list-group-item-light' : ''}" th:href="@{${info==null} ? '/calibration/converter/gain' : '/calibration/gain?sn=' + ${info.serialNumber}}">Gain</a>
    			<div><hr class="dropdown-divider"></div>
<!-- Calibration Mode -->
    			<a class="dropdown-item" id="calMode" th:classappend="${info==null ? 'disabled list-group-item-light' : ''}" href="#">Calibration Mode</a>
    			<div><hr class="dropdown-divider"></div>
<!-- Current Offset -->
    			<a id="menuCurrentOffset" class="dropdown-item calibrate" th:classappend="${info==null ? 'disabled list-group-item-light' : ''}" th:href="@{${info==null} ? '#' : '/calibration/current_offset?sn=' + ${info.serialNumber}}">Current Offset</a>
    			<a 	class="dropdown-item dump_devices"
    				th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
    				th:href="@{${info==null} ? '#' : '/calibration/rest/dumps?sn=' + ${info.serialNumber} + '&devid=' + ${devid} + '&command=regs&groupindex=20'}">Current Dump</a>
	   			<div><hr class="dropdown-divider"></div>
<!-- PLL Registers -->
    			<a id="menuPll" class="dropdown-item calibrate" th:classappend="${info==null ? 'disabled list-group-item-light' : ''}" th:href="@{${info==null} ? '#' : '/calibration/pll?sn=' + ${info.serialNumber}}">PLL</a>
	   			<div><hr class="dropdown-divider"></div>
<!-- Gain From -->
    			<a class="dropdown-item" id="gain_from_cookies" th:classappend="${serialNumber==null ? 'disabled list-group-item-light' : ''}" href="#" data-th-data-sn="${serialNumber} + '_gainTable'">Gain from Cookies</a>
    			<div><hr class="dropdown-divider"></div>
<!-- Profile Editor: Biasing Sequence -->
				<div class="btn-group w=100 biasing">
					<div class="btn-group dropstart" role="group">
 						<button id="menuModuleBiasing"
 								type="button"
 								class="btn dropdown-toggle dropdown-toggle-split submenu modules"
 								th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
 								data-bs-toggle="dropdown"
 								aria-expanded="false">
    						<span class="visually-hidden">Toggle Dropdown</span>
  						</button>
   						<div class="dropdown-menu " aria-labelledby="menuModuleBiasing">

    						<a class="dropdown-item disabled">Modules:</a>
<!--  Modules Biasing Sequence -->
<th:block th:remove="all">
<th:block th:fragment="menuModuleBiasing">
    						<a	th:each="info, stat : ${modules}"
    							th:id="'menuModuleBiasing' + ${stat.count}"
    							th:text="${info.serialNumber}"
    							th:title="${info.name}"
    							th:data-device-id="${info.moduleId}"
    							class="dropdown-item"
    							th:href="@{${info==null} ? '#' : '/calibration/biasing?sn=' + ${serialNumber} + '&module=' + ${info.serialNumber}}">Module Serial Number</a>
  		<script th:inline="javascript">
			/*<![CDATA[*/
				$('div[aria-labelledby=menuModuleBiasing]').find('a').click(showCalibrationModal);
			/*]]>*/
			//# sourceURL=menuModuleBiasing.js
  		</script>
</th:block>
</th:block>
    					</div>
					</div>
<!-- System Biasing Sequence-->
					<a	id="manuBiasingSequence"
						class="dropdown-item calibrate"
						th:classappend="${info==null ? 'disabled list-group-item-light' : ''}"
    					th:data-device-id="${devid}"
						th:href="@{${info==null} ? '#' : '/calibration/biasing?sn=' + ${info.serialNumber}}">Biasing Sequence</a>
 				</div>
    			<div><hr class="dropdown-divider"></div>
    			<a class="dropdown-item" href="../static/files/http.serial_port.jar" th:href="@{/files/http.serial_port.jar}">Download HTTP Serial Port App.</a>
  			</div>
		</div>
	</nav>
<!-- Toast -->
<div id="toast-container" class="toast-container position-fixed start-0 mt-5">
</div>

<!-- Content -->
	<div id="content" class="container-fluid">

<!-- Accordion -->
		<div class="accordion" id="accordion">

<!-- Output -->
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingOutput">
					<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOutput" aria-expanded="true" aria-controls="collapseOutput">Output Tool:<strong id="outputInfo" class="text-danger"> Serial Port is not selected</strong></button>
				</h2>
				<div id="collapseOutput" class="accordion-collapse collapse" aria-labelledby="headingOutput" data-bs-parent="#accordion">
					<div class="accordion-body">
						<div class="row gap-3 mb-3">
							<div class="form-floating col">
	        					<select id="outputComPorts" class="form-select com-ports" data-info-message="outputInfo" title="Serial Port">
									<option selected="selected" disabled="disabled" hidden="hidden" value="">Select a Serial Port</option>
	        					</select>
	        					<label for="outputComPorts">Serial Port</label>
	        				</div>
							<div class="form-floating col-sm">
		        				<select id="outputTool" class="form-select save-to-cookies tool" title="Outpu Tool">
									<option selected="selected" disabled="disabled" hidden="hidden" value="">Select a Power Meter</option>
									<option value="HP438A" th:each="outputTool, stat : ${T(irt.components.beans.irt.calibration.tools.OutputTools).values()}" th:text="${outputTool.name}" th:value="${outputTool.commands}">HP438A</option>
		        				</select>
	        					<label for="outputTool">Tool</label>
	        				</div>
							<div class="col-sm input-group flex-nowrap">
								<div class="form-floating">
									<input id="outputToolValue" type="number" class="form-control" onfocus="this.blur();" readonly></input>
	        						<label for="outputToolValue">Output Value</label>
	        					</div>
								<button id="outputGet" class="input-group-text btn btn-outline-secondary tool-btn disabled">Get</button>
							</div>
<!-- 							<button id="ouputZero" class="input-group-text col btn btn-outline-secondary output-buton to-disable disabled">Zero</button> -->
      					</div>
<!--  Prologix (Output Tool) -->
      					<div class="row gap-3 prologix">

							<div class="col-lg input-group flex-nowrap">
								<input id="outputToolAddress" type="number" class="form-control address" aria-label="Tool Address" title="Tool Address" placeholder="Address" value="13">
								<button class="input-group-text btn btn-outline-secondary to-disable disabled"
										data-commands='["++addr 13"]'
										data-get-answer='false'>Set</button>
							</div>
	        				<button class="form-control col btn btn-outline-secondary to-disable disabled"
	        						title="Press to set default values( SAVE CONFIG = off, MODE = CONTROLLER)"
	        						data-commands='["++savecfg 0", "++mode 1"]'>Set Default</button>
	        				<button class="form-control col btn btn-outline-secondary to-disable disabled"
	        						data-commands='["++auto", "++savecfg", "++mode", "++addr"]'
									data-get-answer='true'>Get All</button>
	        				<button id="outputToolAuto"
	        						class="form-control col btn btn-outline-secondary to-disable disabled btn-prologix btn-auto"
	        						title="Press To get the Auto Setting"
	        						data-commands-to-choose='["++auto 1", "++auto 0"]'
	        						data-commands='["++auto"]'
	        						data-get-answer="true"
	        						data-message='["AUTO OFF", "AUTO ON"]'
	        						data-title='["Press to set AUTO ON", "Press to set AUTO OFF"]'
	        						data-classes='["btn-primary", "btn-success"]'>Get AUTO</button>
	        				<button class="form-control col btn btn-outline-secondary to-disable disabled btn-prologix btn-mode"
	        						title="Press To get the Prologix Mode"
	        						data-commands-to-choose='["++mode 1", "++mode 0"]'
	        						data-commands='["++mode"]'
	        						data-get-answer="true"
	        						data-message='["DEVICE", "CONTROLLER"]'
	        						data-title='["Press to set CONTROLLER mode", "Press to set DEVICE mode"]'
	        						data-classes='["btn-primary", "btn-success"]'>Get Mode</button>
	        				<button class="form-control col btn btn-outline-secondary to-disable disabled btn-prologix btn-savecfg"
	        						title="Press To get the SAVE CONFIG setting"
	        						data-commands-to-choose='["++savecfg 1", "++savecfg 0"]'
	        						data-commands='["++savecfg"]'
	        						data-get-answer="true"
	        						data-message='["SAVE CONF. OFF", "SAVE CONF. ON"]'
	        						data-title='["Press to set SAVE CONFIG on", "Press to set SAVE CONFIG off"]'
	        						data-classes='["btn-success", "btn-primary"]'>SAVE CONFIG</button>
	        				<button id="outputToolPrologixRST"
	        						class="form-control col btn btn-outline-secondary to-disable disabled"
	        						title="Press to reset of the USB/GPIB controller"
	        						data-commands='["++rst"]'
	        						data-get-answer="false">Reset</button>
      					</div>
      				</div>
				</div>
			</div>

<!-- Input -->
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingInput">
					<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInput" aria-expanded="true" aria-controls="collapseInput">Input Tool :<strong id="inputInfo" class="text-danger"> Serial Port is not selected</strong></button>
				</h2>
				<div id="collapseInput" class="accordion-collapse collapse" aria-labelledby="headingInput" data-bs-parent="#accordion">
					<div class="accordion-body">
						<div class="row gap-3 mb-3">
							<div class="form-floating col">
								<select id="inputComPorts" class="form-select com-ports" data-info-message="inputInfo" title="Serial Port">
									<option selected="selected" disabled="disabled" hidden="hidden" title="Serial Port Server" value="">Select a Serial Port</option>
	    	    				</select>
	        					<label for="inputComPorts">Serial Port</label>
	    	    			</div>
							<div class="form-floating col-sm">
		        				<select id="inputTool" class="form-select save-to-cookies tool" title="Input Tool">
									<option selected="selected" disabled="disabled" hidden="hidden" title="Input Tool" value="">Select Input</option>
									<option value="HP438A" 
											th:each="inputTool : ${T(irt.components.beans.irt.calibration.tools.InputTools).values()}" 
											th:text="${inputTool.name}" 
											th:value="${inputTool.commands}"
											th:data-read-format="${inputTool.toRead}"
											th:data-freq-factor="${inputTool.freqFactor}"
											th:data-power-unit="${inputTool.powerUnit}">HP438A</option>
		        				</select>
	        					<label for="inputTool">Tool</label>
		        			</div>
							<div class="col-sm input-group flex-nowrap">
								<div class="form-floating">
		        					<select id="inputOutput" class="form-select input-value" data-for="#inputOutputBtn" title="Tool Output Satatus">
		        						<option selected="selected" title="Tool Output (ON or OFF)" value="">Output</option>
		        						<option value="0">Off</option>
		        						<option Value="1">On</option>
		        					</select>
	        						<label for="inputOutput">Output Power</label>
		        				</div>
								<button id="inputOutputBtn" class="input-group-text btn btn-outline-secondary input-tool-buton tool-btn disabled" value="0">Get</button>
							</div>
							<div class="col-lg input-group flex-nowrap">
								<div class="form-floating">
		        					<input id="inputFrequency" type="number" class="input-value form-control" title="Frequency" placeholder="Frequency" data-for="#inputFrequencyBtn"  data-bs-content="Bottom popover" data-step="250">
	        						<label for="inputFrequency">Frequency</label>
		        				</div>
	        					<select id="inputFrequencyUnit" class="form-select save-to-cookies" title="Frequensy Unit" style="max-width:30%;">
	        						<option value="GHZ" data-divider="1000000000">GHz</option>
	        						<option value="MHZ" data-divider="1000000">MHz</option>
	        						<option value="KHZ" data-divider="1000">kHz</option>
	        					</select>
								<button id="inputFrequencyBtn" class="input-group-text btn btn-outline-secondary input-tool-buton tool-btn disabled" value="1">Get</button>
	        				</div>
							<div class="col input-group flex-nowrap">
								<input id="inputPowerUnit" type="hidden">
								<div class="form-floating">
		        					<input id="inputPower" type="number" class="input-value form-control" title="Power" placeholder="Power" data-for="#inputPowerBtn"  data-bs-content="Bottom popover" data-step="1">
	        						<label for="inputPower">Power Level</label>
		        				</div>
								<button id="inputPowerBtn" class="input-group-text btn btn-outline-secondary input-tool-buton tool-btn disabled" value="2">Get</button>
							</div>
						</div>
<!--  Prologix (Input Tool) -->
      					<div class="row gap-3 prologix">

							<div class="col-lg input-group flex-nowrap">
								<input id="inputToolAddress" type="number" class="form-control address" aria-label="Tool Address" title="Tool Address" placeholder="Address" value="19">
								<button class="input-group-text btn btn-outline-secondary to-disable disabled"
										data-commands='["++addr 19"]'
										data-get-answer='false'>Set</button>
							</div>
	        				<button class="form-control col btn btn-outline-secondary to-disable disabled"
	        						title="Press to set default values( SAVE CONFIG = off, MODE = CONTROLLER)"
	        						data-commands='["++savecfg 0", "++mode 1"]'>Set Default</button>
	        				<button class="form-control col btn btn-outline-secondary to-disable disabled"
	        						data-commands='["++auto", "++savecfg", "++mode", "++addr"]'
									data-get-answer='true'>Get All</button>
	        				<button id="inputToolAuto"
	        						class="form-control col btn btn-outline-secondary to-disable disabled btn-prologix btn-auto"
	        						title="Press To get the Auto Setting"
	        						data-commands-to-choose='["++auto 1", "++auto 0"]'
	        						data-commands='["++auto"]'
	        						data-get-answer="true"
	        						data-message='["AUTO OFF", "AUTO ON"]'
	        						data-title='["Press to set AUTO ON", "Press to set AUTO OFF"]'
	        						data-classes='["btn-success", "btn-success"]'>Get AUTO</button>
	        				<button class="form-control col btn btn-outline-secondary to-disable disabled btn-prologix btn-mode"
	        						title="Press To get the Prologix Mode"
	        						data-commands-to-choose='["++mode 1", "++mode 0"]'
	        						data-commands='["++mode"]'
	        						data-get-answer="true"
	        						data-message='["DEVICE", "CONTROLLER"]'
	        						data-title='["Press to set CONTROLLER mode", "Press to set DEVICE mode"]'
	        						data-classes='["btn-primary", "btn-success"]'>Get Mode</button>
	        				<button class="form-control col btn btn-outline-secondary to-disable disabled btn-prologix btn-savecfg"
	        						title="Press To get the SAVE CONFIG setting"
	        						data-commands-to-choose='["++savecfg 1", "++savecfg 0"]'
	        						data-commands='["++savecfg"]'
	        						data-get-answer="true"
	        						data-message='["SAVE CONF. OFF", "SAVE CONF. ON"]'
	        						data-title='["Press to set SAVE CONFIG on", "Press to set SAVE CONFIG off"]'
	        						data-classes='["btn-success", "btn-primary"]'>SAVE CONFIG</button>
	        				<button id="inputToolPrologixRST"
	        						class="form-control col btn btn-outline-secondary to-disable disabled"
	        						title="Press to reset of the USB/GPIB controller"
	        						data-commands='["++rst"]'
	        						data-get-answer="false">Reset</button>
      					</div>
      				</div>
				</div>
			</div>

<!-- Furnace -->
			<div class="accordion-item">
				<h2 class="accordion-header" id="headingFurnace">
					<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFurnace" aria-expanded="true" aria-controls="collapseFurnace">Furnace :<strong id="furnaceInfo" class="text-danger"> Serial Port is not selected</strong></button>
				</h2>
				<div id="collapseFurnace" class="accordion-collapse collapse" aria-labelledby="headingFurnace" data-bs-parent="#accordion">
					<div class="accordion-body">
						<div class="row">
	        				<select id="furnaceComPorts" class="form-control col com-ports" data-info-message="furnaceInfo" title="Serial Port">
								<option selected="selected" disabled="disabled" hidden="hidden" title="Serial Port Server" value="">Select a Serial Port</option>
	        				</select>
						</div>
      				</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="card col-xxl-2 col-lg-3 col-md-6 col-sm-6">
				<div class="card-body">
					<h5 id="webSn" class="card-title">Serial Number</h5>
					<div id="webId">0000000</div>
					<div id="webPn">Part Number</div>
					<div  id="webDescr">Description</div>
				</div>
			</div>
			<div class="card col-xxl-2 col-lg-4 col-md-6 col-sm-6">
				<div class="card-body">
					<h5 id="tunedBy" class="card-title">Unit Tuning</h5>
					<div class="row">
						<div class="col-auto">IMD:</div>
						<div id="oneCImd" class="col">0000000</div>
					</div>
					<div id="oneCNotes" class="pre-line">Notes</div>
				</div>
			</div>
			<div class="card col-xxl-4 col-lg-5 col-md-12 col-sm-12">
				<div id="stickers" class="card-body">
					<h5 class="card-title">Stickers</h5>
				</div>
			</div>
			<div class="card col-xxl-4 col-12">
				<div class="card-body">
					<h5 id="oneCHeadDescr" class="card-title">Description</h5>
					<div id="oneCHeadNotes" class="pre-line">Notes</div>
					<div id="oneCHeadPn">Part Number</div>
					<div  id="oneCHeadIntern">Internal PN</div>
				</div>
			</div>
		</div>
	</div>
<!-- Modal Message -->
	<div id="modal" class="modal fade" tabindex="-1">
  		<div class="modal-dialog">
    		<div class="modal-content">
      			<div class="modal-header">
        			<h5 id="modal_title" class="modal-title ml-3 text-primary">Enter the Serial Number of the Unit.</h5>
        			<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      			</div>
      			<div id="modal-body" class="modal-body">
       				<form action="/calibration" method="get">
          				<div class="form-group row">
            				<label for="sn" class="col-form-label ml-3"><strong>SN:</strong></label>
            				<div class="col-sm-10">
            					<div class="input-group">
            						<input type="text" class="form-control" id="sn" name="sn" placeholder="Serial Number or IP Address" />
            						<div class="input-group-append">
            							<input type="submit" value="Submit">
    								</div>
            					</div>
            				</div>
          				</div>
        			</form>
      			</div>
      			<div class="modal-footer">
	        		<button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
	    		</div>
    		</div>
  		</div>
	</div>	

<th:block th:replace="components :: scripts">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
</th:block>
	<script th:inline="javascript">
	/*<![CDATA[*/
		let serialNumber =  /*[[${serialNumber}]]*/ 'IRT-2121021';
		const info =  /*[[${info}]]*/ '';
		const topId = info ? info.deviceType + '.' + info.typeVersion : null;
		const devid =  /*[[${devid}]]*/ 'IRT-2121021';
	/*]]>*/
	//# sourceURL=sn.js
	</script>
  	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script src="../../static/js/calibration.js" th:src="@{/js/calibration.js}"></script>
	<script src="../../static/js/prologix.js" th:src="@{/js/prologix.js}"></script>
	<script src="../../static/js/inputTool.js" th:src="@{/js/inputTool.js}"></script>
	<script src="../../static/js/outputTool.js" th:src="@{/js/outputTool.js}"></script>
	<script src="../../static/js/serial/packet.js" th:src="@{/js/serial/packet.js}"></script>
	<script src="../../static/js/serial/chart.js" th:src="@{/js/serial/chart.js}"></script>
  	<script src="../../static/js/serial/calModalInit.js" th:src="@{/js/serial/calModalInit.js}"></script>
  	<script src="../../static/js/management/unit-control.js" th:src="@{/js/management/unit-control.js}"></script>
  	<script src="../../static/js/management/calibration-management.js" th:src="@{/js/management/calibration-management.js}"></script>
</body>
</html>